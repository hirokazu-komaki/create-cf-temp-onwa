{
  "test_session": {
    "timestamp": "20250912_161648",
    "total_tests": 5,
    "passed_tests": 0,
    "failed_tests": 5,
    "success_rate": 0.0,
    "total_execution_time": 8.245978832244873,
    "overall_success": false
  },
  "test_results": {
    "ci_cd_integration": {
      "test_name": "ci_cd_integration",
      "description": "CI/CD統合テスト",
      "success": false,
      "execution_time": 3.5766913890838623,
      "return_code": 1,
      "stdout": "🚀 CI/CD統合テスト開始\n================================================================================\nℹ️  GitHub Actionsワークフローファイルを検証中...\nℹ️  検証対象ワークフロー: ['ci-cd-pipeline-single-account.yml']\nℹ️  ワークフロージョブの依存関係を検証中...\n✅ ジョブ 'validate-and-map' の依存関係は正常です\n✅ ジョブ 'test-templates' の依存関係は正常です\n✅ ジョブ 'request-deployment-approval' の依存関係は正常です\n✅ ジョブ 'deploy-to-aws' の依存関係は正常です\nℹ️  デプロイメントプロセスを検証中...\n✅ 設定ファイル basic の検証が完了\n✅ 設定ファイル advanced の検証が完了\n✅ 設定ファイル enterprise の検証が完了\nℹ️  CloudFormationテンプレートを検証中...\n✅ AWS CloudFormationテンプレート検証が成功\n✅ cfn-lint検証が成功\nℹ️  CloudFormation Change Set作成をテスト中...\nℹ️  監視とログ設定を検証中...\nℹ️  環境固有のデプロイメント設定をテスト中...\n✅ basic: 環境固有設定の検証が完了\n✅ advanced: 環境固有設定の検証が完了\n✅ enterprise: 環境固有設定の検証が完了\n\n================================================================================\n📊 CI/CD統合テスト結果\n================================================================================\n\ngithub_actions_workflow: ❌ FAIL\n  - ci-cd-pipeline-single-account.yml: 必須セクションが不足: ['on']\n\nworkflow_job_dependencies: ✅ PASS\n\ndeployment_process: ✅ PASS\n\ncloudformation_validation: ✅ PASS\n\nchangeset_creation: ❌ FAIL\n  - basic: Change Set作成失敗: \nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Unable to fetch parameters [ami-0228232d282f16465] from parameter store for this account.\n\n  - advanced: Change Set作成失敗: \nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Unable to fetch parameters [ami-0abcdef1234567890] from parameter store for this account.\n\n  - enterprise: Change Set作成失敗: \nAn error occurred (ValidationError) when calling the CreateChangeSet operation: Unable to fetch parameters [ami-0enterprise123456789] from parameter store for this account.\n\n\nmonitoring_logging: ❌ FAIL\n  - 監視・ログ設定検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\nenvironment_specific_deployment: ✅ PASS\n\n================================================================================\n❌ 一部のCI/CD統合テストが失敗しました\n上記の問題を解決してから再実行してください\n================================================================================\n\n📄 詳細結果を保存しました: /home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/ci-cd-integration-test-results.json\n",
      "stderr": "",
      "timestamp": "2025-09-12T16:16:52.456223"
    },
    "github_actions_workflow": {
      "test_name": "github_actions_workflow",
      "description": "GitHub Actionsワークフロー検証",
      "success": false,
      "execution_time": 0.20241427421569824,
      "return_code": 1,
      "stdout": "🚀 GitHub Actionsワークフロー検証開始\n================================================================================\nℹ️  発見されたワークフローファイル: 1\nℹ️  有効なワークフローファイル: 1\nℹ️  \n📋 検証中: ci-cd-pipeline-single-account.yml\n------------------------------------------------------------\n✅ YAML構文検証成功: ci-cd-pipeline-single-account.yml\n\n================================================================================\n📊 GitHub Actionsワークフロー検証結果\n================================================================================\n\n📄 ci-cd-pipeline-single-account.yml: ❌ FAIL\n  yaml_syntax: ✅\n  workflow_structure: ❌\n    - 必須フィールドが不足: on\n  job_dependencies: ✅\n  secrets_env_vars: ✅\n  cloudformation_steps: ✅\n  deployment_approval: ❌\n    - デプロイメントジョブ 'request-deployment-approval' が承認プロセスに依存していません\n  error_handling_notifications: ✅\n  github_cli_syntax: ✅\n\n================================================================================\n❌ 一部のワークフロー検証が失敗しました\n上記の問題を解決してから再実行してください\n================================================================================\n\n📄 詳細結果を保存しました: /home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/github-actions-validation-results.json\n",
      "stderr": "",
      "timestamp": "2025-09-12T16:16:52.658712"
    },
    "deployment_process": {
      "test_name": "deployment_process",
      "description": "デプロイメントプロセス検証",
      "success": false,
      "execution_time": 1.5656797885894775,
      "return_code": 1,
      "stdout": "🚀 デプロイメントプロセス検証開始\n================================================================================\nℹ️  AWS認証情報を検証中...\n✅ AWS認証成功 - アカウント: 432423717699\nℹ️  認証情報: arn:aws:iam::432423717699:user/Wani_worked\nℹ️  CloudFormation権限を検証中...\n✅ cloudformation:ValidateTemplate: 権限確認済み\n✅ cloudformation:DescribeChangeSet: 権限確認済み\n✅ cloudformation:DeleteChangeSet: 権限確認済み\nℹ️  テンプレートとパラメータファイルの互換性を検証中...\nℹ️  ドライランデプロイメントをテスト中...\nℹ️  リソース依存関係を検証中...\nℹ️  セキュリティ設定を検証中...\n\n================================================================================\n📊 デプロイメントプロセス検証結果\n================================================================================\n\naws_credentials: ✅ PASS\n  メッセージ: 認証成功 - アカウント: 432423717699\n\ncloudformation_permissions: ❌ FAIL\n  - cloudformation:CreateChangeSet: Change Set作成エラー: Cannot delete ChangeSet in status CREATE_PENDING\n\ntemplate_parameter_compatibility: ❌ FAIL\n  - テンプレート読み込みエラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\ndry_run_deployment: ❌ FAIL\n  - basic: パラメータ検証エラー: Unable to fetch parameters [ami-0228232d282f16465] from parameter store for this account.\n  - advanced: パラメータ検証エラー: Unable to fetch parameters [ami-0abcdef1234567890] from parameter store for this account.\n  - enterprise: パラメータ検証エラー: Unable to fetch parameters [ami-0enterprise123456789] from parameter store for this account.\n\nresource_dependencies: ❌ FAIL\n  - リソース依存関係検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\nsecurity_configuration: ❌ FAIL\n  - セキュリティ設定検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\n================================================================================\n❌ 一部のデプロイメント検証が失敗しました\n上記の問題を解決してからデプロイメントを実行してください\n================================================================================\n\n📄 詳細結果を保存しました: /home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/deployment-process-validation-results.json\n",
      "stderr": "",
      "timestamp": "2025-09-12T16:16:54.224477"
    },
    "monitoring_logging": {
      "test_name": "monitoring_logging",
      "description": "監視・ログ設定検証",
      "success": false,
      "execution_time": 0.6462950706481934,
      "return_code": 1,
      "stdout": "🚀 監視・ログ設定検証開始\n================================================================================\nℹ️  CloudWatchリソースを検証中...\nℹ️  Auto Scaling監視設定を検証中...\nℹ️  IAMログ権限を検証中...\nℹ️  SNS通知設定を検証中...\nℹ️  設定パターン別監視設定を検証中...\n⚠️  basic: ログレベルタグが設定されていません\n✅ basic: パターン別監視設定の検証完了\n⚠️  advanced: ログレベルタグが設定されていません\n✅ advanced: パターン別監視設定の検証完了\n⚠️  enterprise: ログレベルタグが設定されていません\n✅ enterprise: パターン別監視設定の検証完了\nℹ️  ログ集約と保持設定を検証中...\nℹ️  監視エンドポイントの接続性をテスト中...\n✅ CloudWatch Logs APIへの接続が成功しました\n✅ SNS APIへの接続が成功しました\n\n================================================================================\n📊 監視・ログ設定検証結果\n================================================================================\n\ncloudwatch_resources: ❌ FAIL\n  - CloudWatchリソース検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\nauto_scaling_monitoring: ❌ FAIL\n  - Auto Scaling監視設定検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\niam_logging_permissions: ❌ FAIL\n  - IAMログ権限検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\nsns_notification_setup: ❌ FAIL\n  - SNS通知設定検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\nconfiguration_pattern_monitoring: ✅ PASS\n\nlog_aggregation_retention: ❌ FAIL\n  - ログ集約・保持設定検証エラー: could not determine a constructor for the tag '!Not'\n  in \"/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/cf-templates/compute/ec2/ec2-autoscaling.yaml\", line 217, column 15\n\nmonitoring_endpoints_connectivity: ❌ FAIL\n  - CloudWatch API接続テストエラー: Parameter validation failed:\nUnknown parameter in input: \"MaxRecords\", must be one of: Namespace, MetricName, Dimensions, NextToken, RecentlyActive, IncludeLinkedAccounts, OwningAccount\n\n================================================================================\n❌ 一部の監視・ログ設定検証が失敗しました\n上記の問題を解決してから本番環境にデプロイしてください\n================================================================================\n\n📄 詳細結果を保存しました: /home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/monitoring-logging-validation-results.json\n",
      "stderr": "",
      "timestamp": "2025-09-12T16:16:54.870892"
    },
    "phase3_final_validation": {
      "test_name": "phase3_final_validation",
      "description": "Phase 3最終検証",
      "success": false,
      "execution_time": 2.2548983097076416,
      "return_code": 1,
      "stdout": "🚀 Starting Phase 3 Final Validation\n================================================================================\n\n📋 Template Validation\n----------------------------------------\n🔍 CloudFormation テンプレート構文を検証中...\n✅ AWS CLI YAMLヘルパーによる構文解析が成功しました\n🔍 Running cfn-lint validation...\n\n============================================================\n🧪 Testing BASIC Configuration Pattern\n============================================================\n🔍 Validating basic parameter structure...\n🔍 Validating basic pattern consistency...\n🔍 Validating resource configuration for basic...\n🔍 Testing changeset creation for basic...\n\n============================================================\n🧪 Testing ADVANCED Configuration Pattern\n============================================================\n🔍 Validating advanced parameter structure...\n🔍 Validating advanced pattern consistency...\n🔍 Validating resource configuration for advanced...\n🔍 Testing changeset creation for advanced...\n\n============================================================\n🧪 Testing ENTERPRISE Configuration Pattern\n============================================================\n🔍 Validating enterprise parameter structure...\n🔍 Validating enterprise pattern consistency...\n🔍 Validating resource configuration for enterprise...\n🔍 Testing changeset creation for enterprise...\n\n================================================================================\n📊 PHASE 3 FINAL VALIDATION RESULTS\n================================================================================\n\n📋 Template Validation Results:\n  syntax: ✅ PASS\n  cfn_lint: ✅ PASS\n\n🧪 Configuration Pattern Test Results:\n\n  BASIC: ❌ FAIL\n    parameter_structure: ✅\n    pattern_consistency: ✅\n    resource_configuration: ✅\n    changeset_creation: ❌\n      - Parameter validation failed: Unable to fetch parameters [ami-0228232d282f16465] from parameter store for this account.\n\n  ADVANCED: ❌ FAIL\n    parameter_structure: ✅\n    pattern_consistency: ✅\n    resource_configuration: ✅\n    changeset_creation: ❌\n      - Parameter validation failed: Unable to fetch parameters [ami-0abcdef1234567890] from parameter store for this account.\n\n  ENTERPRISE: ❌ FAIL\n    parameter_structure: ✅\n    pattern_consistency: ✅\n    resource_configuration: ✅\n    changeset_creation: ❌\n      - Parameter validation failed: Unable to fetch parameters [ami-0enterprise123456789] from parameter store for this account.\n\n================================================================================\n❌ SOME TESTS FAILED - Issues need to be resolved\nPlease review the failed tests above and fix the issues\n================================================================================\n\n📄 Detailed results saved to: /home/hirokazu-niwa/kiro-project/create-cf-temp-onwa/phase3-validation-results.json\n",
      "stderr": "",
      "timestamp": "2025-09-12T16:16:57.125887"
    }
  },
  "environment_info": {
    "python_version": "3.12.11",
    "platform": "linux",
    "working_directory": "/home/hirokazu-niwa/kiro-project/create-cf-temp-onwa"
  }
}